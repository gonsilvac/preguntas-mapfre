<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Carga - Mapfre Q&A</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, sans-serif;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
            text-align: center;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #aaa;
            margin-bottom: 28px;
        }

        .count {
            color: #ED1C24;
            font-weight: bold;
        }

        .controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 24px;
        }

        button {
            padding: 16px 32px;
            font-size: 1rem;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-start {
            background: #ED1C24;
            color: white;
            box-shadow: 0 4px 14px rgba(237, 28, 36, 0.4);
        }

        .btn-start:hover {
            background: #C41018;
            transform: translateY(-1px);
        }

        .btn-start:disabled {
            background: #555;
            cursor: wait;
            box-shadow: none;
            transform: none;
        }

        .btn-clear {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-clear:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .progress {
            margin: 20px 0;
            font-size: 1.5rem;
            color: #10B981;
            min-height: 40px;
        }

        .bar-wrap {
            max-width: 500px;
            margin: 0 auto 24px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ED1C24, #FF6B6B);
            border-radius: 10px;
            transition: width 0.2s;
        }

        #log {
            text-align: left;
            max-width: 700px;
            margin: 0 auto;
            font-size: 0.8rem;
            color: #888;
            max-height: 400px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
        }

        #log div {
            padding: 2px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .warning {
            color: #FCD34D;
            font-size: 0.85rem;
            margin-top: 20px;
        }

        a {
            color: #ED1C24;
        }
    </style>
</head>

<body>
    <h1>üî• Prueba de Carga ‚Äî Mapfre Q&A</h1>
    <p class="subtitle">Enviar√° <span class="count">100 preguntas</span> a Firebase en r√°fagas simult√°neas</p>

    <div class="controls">
        <button class="btn-start" id="startBtn" onclick="startLoadTest()">üöÄ Iniciar Prueba (100 preguntas)</button>
        <button class="btn-clear" onclick="clearAll()">üóë Limpiar todas</button>
    </div>

    <div class="bar-wrap">
        <div class="bar-fill" id="barFill"></div>
    </div>
    <div class="progress" id="progress"></div>
    <div id="log"></div>
    <p class="warning">‚ö†Ô∏è Esta p√°gina es solo para pruebas internas. <a href="dashboard.html">Ir al Dashboard</a></p>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCbDnwI3LJ1rTAOgYeorSmeXhBAsmm1BbQ",
            authDomain: "preguntas-mapfre.firebaseapp.com",
            databaseURL: "https://preguntas-mapfre-default-rtdb.firebaseio.com",
            projectId: "preguntas-mapfre",
            storageBucket: "preguntas-mapfre.firebasestorage.app",
            messagingSenderId: "668179710134",
            appId: "1:668179710134:web:667fc42cda4efa2357e617"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const nombres = [
            "Mar√≠a Garc√≠a", "Juan P√©rez", "Ana Rodr√≠guez", "Carlos L√≥pez", "Laura Mart√≠nez",
            "Diego Fern√°ndez", "Sof√≠a S√°nchez", "Miguel Ram√≠rez", "Isabella Torres", "Andr√©s Morales",
            "Valentina D√≠az", "Sebasti√°n Castro", "Camila Herrera", "Daniel Vargas", "Paula Jim√©nez",
            "Nicol√°s Mendoza", "Luc√≠a Romero", "Alejandro Navarro", "Gabriela Flores", "Mateo Cruz",
            "Daniela Reyes", "Emilio Ortega", "Catalina Salazar", "Felipe Guerrero", "Mariana R√≠os",
            "Santiago Silva", "Valeria Medina", "Tom√°s Aguilar", "Renata Pe√±a", "Joaqu√≠n Vega",
            "Antonella Pacheco", "Lucas Delgado", "Victoria Molina", "Maximiliano Rojas", "Elena Cabrera",
            "Ignacio Espinoza", "Natalia Fuentes", "Rafael C√≥rdoba", "Carolina Miranda", "Adri√°n Guzm√°n",
            "Andrea Contreras", "Pedro Ruiz", "Lorena Sandoval", "Roberto Campos", "Patricia Acosta",
            "Fernando V√°zquez", "Beatriz Le√≥n", "Oscar Dom√≠nguez", "Gloria Ib√°√±ez", "Ricardo Serrano",
            "Claudia Herrera", "Mart√≠n Soto", "Teresa Paredes", "H√©ctor Rivas", "M√≥nica Castillo",
            "Ram√≥n Pe√±aloza", "Estela C√≥rdoba", "Gustavo Mora", "Silvia Bravo", "Enrique Vidal",
            "Pilar Montalvo", "Rodrigo Arce", "Diana Quiroz", "√Ålvaro Cifuentes", "Carmen Barrientos",
            "Luis Espino", "Rosa Maldonado", "Javier Belmonte", "Alicia Coronel", "Ernesto Dur√°n",
            "Norma Villegas", "C√©sar Bustos", "In√©s Aldana", "Rub√©n Carvajal", "Marta Sol√≠s",
            "Eduardo Berm√∫dez", "Susana Palacios", "Manuel Granados", "Liliana Trejo", "Francisco Ochoa",
            "Marcela Cort√©s", "Arturo Valencia", "Estela Bustamante", "Ra√∫l Galv√°n", "Leticia Ar√©valo",
            "Hugo Quintero", "Adriana Rold√°n", "Jorge Sep√∫lveda", "Ver√≥nica Luna", "Sergio Camargo",
            "Cecilia Montero", "Germ√°n Alfaro", "Yolanda Escobar", "Pablo Ibarra", "Noem√≠ Calder√≥n",
            "√ìscar Zamorano", "Marisol Henr√≠quez", "Alberto Lara", "Graciela Tovar", "Ren√© Figueroa"
        ];

        const preguntas = [
            "¬øCu√°l es la estrategia de Mapfre frente al cambio clim√°tico y los riesgos naturales?",
            "¬øC√≥mo se est√°n adaptando los seguros de Global Risks a los riesgos cibern√©ticos emergentes?",
            "¬øQu√© innovaciones tecnol√≥gicas est√° implementando Mapfre en la evaluaci√≥n de riesgos?",
            "¬øCu√°l es su visi√≥n sobre el mercado de seguros en Latinoam√©rica para los pr√≥ximos 5 a√±os?",
            "¬øC√≥mo maneja Mapfre la retenci√≥n de talento en el sector asegurador?",
            "¬øQu√© papel juega la inteligencia artificial en la detecci√≥n de fraudes?",
            "¬øC√≥mo impacta la regulaci√≥n ESG en las decisiones de inversi√≥n de Mapfre?",
            "¬øCu√°les son los principales desaf√≠os del sector asegurador post-pandemia?",
            "¬øQu√© productos nuevos est√° desarrollando Mapfre para el segmento de PYMES?",
            "¬øC√≥mo se integra la sostenibilidad en la cadena de valor de Mapfre?",
            "¬øCu√°l es la pol√≠tica de Mapfre respecto a seguros param√©tricos?",
            "¬øC√≥mo est√°n evolucionando los seguros de responsabilidad civil en el contexto actual?",
            "¬øQu√© oportunidades ve Mapfre en el mercado de seguros para energ√≠as renovables?",
            "¬øC√≥mo afecta la inflaci√≥n global a la suscripci√≥n de riesgos?",
            "¬øQu√© estrategias tiene Mapfre para la transformaci√≥n digital de sus clientes corporativos?",
            "¬øCu√°l es el enfoque de Mapfre en seguros de cadena de suministro?",
            "¬øC√≥mo eval√∫an los riesgos geopol√≠ticos en las p√≥lizas internacionales?",
            "¬øQu√© avances hay en seguros embebidos y su impacto en el negocio?",
            "¬øCu√°l es la posici√≥n de Mapfre sobre las criptomonedas y blockchain en seguros?",
            "¬øC√≥mo se est√°n preparando para los riesgos asociados a la transici√≥n energ√©tica?",
            "¬øQu√© rol juega Mapfre en la educaci√≥n financiera y de seguros?",
            "¬øCu√°les son las tendencias en reaseguros que m√°s impactan a Global Risks?",
            "¬øC√≥mo maneja Mapfre los siniestros catastr√≥ficos a nivel global?",
            "¬øQu√© innovaciones est√°n implementando en el proceso de reclamaciones?",
            "¬øCu√°l es la estrategia de expansi√≥n de Mapfre en Asia-Pac√≠fico?",
            "¬øC√≥mo ve Mapfre la evoluci√≥n del seguro de autom√≥viles con veh√≠culos aut√≥nomos?",
            "¬øQu√© medidas toma Mapfre para garantizar la ciberseguridad de los datos de clientes?",
            "¬øCu√°l es su opini√≥n sobre la consolidaci√≥n del mercado asegurador global?",
            "¬øC√≥mo est√° Mapfre enfrentando los desaf√≠os de la longevidad en seguros de vida?",
            "¬øQu√© importancia tiene el an√°lisis predictivo en la gesti√≥n de riesgos?",
            "¬øCu√°les son los principales riesgos emergentes que monitorea Mapfre actualmente?",
            "¬øC√≥mo se adapta Mapfre a las nuevas regulaciones de protecci√≥n de datos?",
            "¬øQu√© papel juega la cultura corporativa en la innovaci√≥n de Mapfre?",
            "¬øC√≥mo eval√∫a Mapfre el riesgo reputacional de sus clientes corporativos?",
            "¬øQu√© impacto tiene el teletrabajo en los seguros de responsabilidad patronal?",
            "¬øCu√°l es la estrategia de Mapfre en seguros de salud mental laboral?",
            "¬øC√≥mo est√° Mapfre utilizando IoT para mejorar la prevenci√≥n de siniestros?",
            "¬øQu√© soluciones ofrece Mapfre para riesgos de interrupci√≥n de negocio?",
            "¬øCu√°l es su visi√≥n sobre Open Insurance y la apertura de datos?",
            "¬øC√≥mo maneja Mapfre la diversificaci√≥n geogr√°fica de riesgos?",
            "¬øQu√© planes tiene Mapfre para ampliar su oferta de microseguros?",
            "¬øC√≥mo afectan las guerras comerciales a los seguros de comercio internacional?",
            "¬øCu√°l es la experiencia de Mapfre con seguros de pandemias y eventos similares?",
            "¬øQu√© tecnolog√≠as disruptivas est√°n transformando la industria aseguradora?",
            "¬øC√≥mo ve Mapfre el futuro de los seguros personalizados?",
            "¬øCu√°l es la pol√≠tica de Mapfre respecto a la inversi√≥n responsable?",
            "¬øC√≥mo est√°n utilizando drones y sat√©lites en la evaluaci√≥n de da√±os?",
            "¬øQu√© estrategias tiene Mapfre para reducir su huella de carbono operativa?",
            "¬øCu√°l es el enfoque de Mapfre en protecci√≥n contra terrorismo y sabotaje?",
            "¬øC√≥mo est√° evolucionando el seguro mar√≠timo con los nuevos riesgos log√≠sticos?",
            "¬øQu√© papel juegan los datos alternativos en la suscripci√≥n de riesgos de Mapfre?",
            "¬øC√≥mo afronta Mapfre los desaf√≠os regulatorios en diferentes jurisdicciones?",
            "¬øCu√°l es el impacto de la econom√≠a circular en los seguros de Mapfre?",
            "¬øQu√© herramientas digitales ofrece Mapfre para la gesti√≥n de p√≥lizas corporativas?",
            "¬øC√≥mo se prepara Mapfre para los riesgos asociados al metaverso y realidad virtual?",
            "¬øQu√© experiencia tiene Mapfre en seguros para infraestructura cr√≠tica?",
            "¬øCu√°l es la estrategia de Mapfre en materia de inclusi√≥n financiera?",
            "¬øC√≥mo eval√∫a Mapfre los riesgos de la cadena de valor extendida?",
            "¬øQu√© impacto tiene la electrificaci√≥n del transporte en las p√≥lizas de Mapfre?",
            "¬øC√≥mo est√° Mapfre innovando en seguros agr√≠colas y agropecuarios?",
            "¬øCu√°l es su perspectiva sobre los seguros de cr√©dito en el contexto actual?",
            "¬øQu√© rol juega la anal√≠tica avanzada en la fijaci√≥n de primas?",
            "¬øC√≥mo maneja Mapfre la comunicaci√≥n de crisis con stakeholders?",
            "¬øQu√© soluciones tiene Mapfre para riesgos ambientales y de contaminaci√≥n?",
            "¬øC√≥mo se integra Mapfre con los ecosistemas de insurtech?",
            "¬øCu√°l es la pol√≠tica de Mapfre para la protecci√≥n de trabajadores remotos?",
            "¬øQu√© perspectivas tiene Mapfre sobre seguros de inteligencia artificial?",
            "¬øC√≥mo gestiona Mapfre la relaci√≥n con corredores y mediadores?",
            "¬øCu√°l es el enfoque de Mapfre en big data para modelos actuariales?",
            "¬øQu√© desaf√≠os ve Mapfre en el cumplimiento normativo internacional?",
            "¬øC√≥mo est√° Mapfre abordando los seguros para la econom√≠a gig?",
            "¬øCu√°l es la posici√≥n de Mapfre frente a los riesgos nucleares?",
            "¬øQu√© innovaciones hay en la experiencia digital del cliente de Mapfre?",
            "¬øC√≥mo afecta la escasez de semiconductores a los seguros industriales?",
            "¬øCu√°l es la estrategia de Mapfre para mercados emergentes en √Åfrica?",
            "¬øQu√© papel juega la telem√°tica en los productos de seguros de Mapfre?",
            "¬øC√≥mo ve Mapfre el futuro de la distribuci√≥n de seguros?",
            "¬øCu√°les son los KPIs clave que utiliza Global Risks para medir el √©xito?",
            "¬øQu√© lecciones aprendi√≥ Mapfre de los grandes siniestros recientes?",
            "¬øC√≥mo est√° Mapfre prepar√°ndose para el aumento del nivel del mar y sus impactos?",
            "¬øQu√© acuerdos internacionales tiene Mapfre para la cobertura de riesgos transfronterizos?",
            "¬øCu√°l es la visi√≥n de Mapfre sobre la automatizaci√≥n de procesos internos?",
            "¬øC√≥mo afronta Mapfre los riesgos derivados de la obsolescencia tecnol√≥gica?",
            "¬øQu√© estrategias de retenci√≥n de clientes corporativos maneja Mapfre?",
            "¬øCu√°l es la postura de Mapfre sobre la regulaci√≥n de IA en seguros?",
            "¬øC√≥mo participa Mapfre en iniciativas globales de sostenibilidad?",
            "¬øQu√© oportunidades identifica Mapfre en seguros para startups y scaleups?",
            "¬øC√≥mo impacta el envejecimiento poblacional en los productos de Mapfre?",
            "¬øCu√°l es el plan de Mapfre para la transformaci√≥n del talento interno?",
            "¬øQu√© alianzas estrat√©gicas tiene Mapfre para ampliar su red global?",
            "¬øC√≥mo est√° Mapfre utilizando gemelos digitales en la gesti√≥n de riesgos?",
            "¬øCu√°l es la experiencia de Mapfre con seguros de responsabilidad de directivos?",
            "¬øQu√© soluciones ofrece Mapfre para la gesti√≥n de riesgos de terceros?",
            "¬øC√≥mo maneja Mapfre los riesgos asociados a la biodiversidad?",
            "¬øCu√°les son las prioridades de inversi√≥n tecnol√≥gica de Mapfre para 2027?",
            "¬øC√≥mo ve Mapfre la convergencia entre seguros y servicios financieros?",
            "¬øQu√© mecanismos tiene Mapfre para manejar riesgos sist√©micos?",
            "¬øCu√°l es el impacto de las sanciones internacionales en las operaciones de Mapfre?",
            "¬øC√≥mo est√° Mapfre avanzando en la personalizaci√≥n de la experiencia del cliente?",
            "¬øQu√© perspectivas tiene Mapfre sobre el seguro embebido en plataformas digitales?"
        ];

        const tel = () => '+' + (Math.floor(Math.random() * 90) + 10) + ' ' +
            Math.floor(Math.random() * 900 + 100) + ' ' +
            Math.floor(Math.random() * 900 + 100) + ' ' +
            Math.floor(Math.random() * 9000 + 1000);

        let sent = 0;
        const total = 100;

        async function startLoadTest() {
            const btn = document.getElementById('startBtn');
            const progress = document.getElementById('progress');
            const log = document.getElementById('log');
            const barFill = document.getElementById('barFill');
            btn.disabled = true;
            btn.textContent = '‚è≥ Enviando...';
            sent = 0;
            log.innerHTML = '';
            barFill.style.width = '0%';

            const promises = [];
            const startTime = Date.now();

            for (let i = 0; i < total; i++) {
                const delay = Math.random() * 5000; // spread over 5 seconds
                const p = new Promise((resolve) => {
                    setTimeout(() => {
                        const data = {
                            nombre: nombres[i % nombres.length],
                            telefono: tel(),
                            consulta: preguntas[i % preguntas.length],
                            timestamp: Date.now(),
                            fecha: new Date().toLocaleString('es-ES')
                        };
                        db.ref('consultas').push(data).then(() => {
                            sent++;
                            const pct = Math.round(sent / total * 100);
                            progress.textContent = `${sent} / ${total} enviadas (${pct}%)`;
                            barFill.style.width = pct + '%';
                            log.innerHTML += `<div>‚úÖ #${sent} ‚Äî ${data.nombre}: "${data.consulta.substring(0, 50)}..."</div>`;
                            log.scrollTop = log.scrollHeight;
                            resolve();
                        });
                    }, delay);
                });
                promises.push(p);
            }

            await Promise.all(promises);
            const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
            progress.textContent = `‚úÖ ${total} preguntas enviadas en ${elapsed}s`;
            btn.textContent = '‚úÖ Completado ‚Äî Clic para repetir';
            btn.disabled = false;
            btn.onclick = () => { location.reload(); };
            log.innerHTML += `<div style="color:#10B981;font-weight:bold;margin-top:10px;">‚Äî Prueba completada: ${total} preguntas en ${elapsed} segundos ‚Äî</div>`;
        }

        function clearAll() {
            if (confirm('¬øEliminar TODAS las preguntas de Firebase?')) {
                db.ref('consultas').remove().then(() => {
                    document.getElementById('progress').textContent = 'üóë Todas las preguntas eliminadas';
                    document.getElementById('log').innerHTML = '<div style="color:#FCD34D;">Base de datos vaciada.</div>';
                    document.getElementById('barFill').style.width = '0%';
                });
            }
        }
    </script>
</body>

</html>